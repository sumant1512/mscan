<div class="dashboard">

  <!-- Main Content -->
  <div class="content">
    <!-- Loading State -->
    <div class="loading-container" *ngIf="loading$ | async">
      <div class="spinner"></div>
      <p>Loading dashboard...</p>
    </div>

    <!-- Error State -->
    <div class="error-box" *ngIf="error && !(loading$ | async)">
      âš ï¸ {{ error }}
      <button class="btn-retry" (click)="loadDashboardStats()">Retry</button>
    </div>

    <!-- Quick Actions (visible when not loading) -->
    <div class="quick-actions" *ngIf="!(loading$ | async)">
      <h2>Quick Actions</h2>
      <button class="btn-action" (click)="navigateToCustomers()">
        <span class="action-icon">â•</span>
        Register New Tenant
      </button>
    </div>

    <!-- Dashboard Content -->
    <div class="dashboard-content" *ngIf="stats && !(loading$ | async)">
      <!-- Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon customers">ğŸ¢</div>
          <div class="stat-info">
            <h3>Total Customers</h3>
            <p class="stat-value">{{ stats.totalTenants }}</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon users">ğŸ‘¥</div>
          <div class="stat-info">
            <h3>Total Users</h3>
            <p class="stat-value">{{ stats.totalUsers }}</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon active">ğŸŸ¢</div>
          <div class="stat-info">
            <h3>Active Sessions (24h)</h3>
            <p class="stat-value">{{ stats.activeSessions24h }}</p>
          </div>
        </div>
      </div>

      <!-- Recent Tenants Table -->
      <div class="section">
        <h2>Recent Customers</h2>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Company Name</th>
                <th>Contact Email</th>
                <th>Created At</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let tenant of stats.recentTenants">
                <td>{{ tenant.tenant_name }}</td>
                <td>{{ tenant.email }}</td>
                <td>{{ tenant.created_at | date : 'short' }}</td>
              </tr>
              <tr *ngIf="stats.recentTenants.length === 0">
                <td colspan="3" class="no-data">No customers registered yet</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
